<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScropt 语言 | 时光海小屋</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="https://public.shiguanghai.top/public/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.33fb72bf.css" as="style"><link rel="preload" href="/assets/js/app.9170ba12.js" as="script"><link rel="preload" href="/assets/js/3.654813a0.js" as="script"><link rel="preload" href="/assets/js/1.6c2e7c81.js" as="script"><link rel="preload" href="/assets/js/16.ad9b491c.js" as="script"><link rel="prefetch" href="/assets/js/10.41d51341.js"><link rel="prefetch" href="/assets/js/100.59d59f05.js"><link rel="prefetch" href="/assets/js/101.f0831c96.js"><link rel="prefetch" href="/assets/js/102.d82ad08f.js"><link rel="prefetch" href="/assets/js/103.465427d4.js"><link rel="prefetch" href="/assets/js/104.2ba43564.js"><link rel="prefetch" href="/assets/js/105.e61fdc51.js"><link rel="prefetch" href="/assets/js/11.af60615d.js"><link rel="prefetch" href="/assets/js/12.a56c8acf.js"><link rel="prefetch" href="/assets/js/13.68642e02.js"><link rel="prefetch" href="/assets/js/14.19ce2b13.js"><link rel="prefetch" href="/assets/js/15.6df68684.js"><link rel="prefetch" href="/assets/js/17.09366251.js"><link rel="prefetch" href="/assets/js/18.ffa248c7.js"><link rel="prefetch" href="/assets/js/19.5c2edda0.js"><link rel="prefetch" href="/assets/js/20.747442d4.js"><link rel="prefetch" href="/assets/js/21.1246eb00.js"><link rel="prefetch" href="/assets/js/22.bc3d4af3.js"><link rel="prefetch" href="/assets/js/23.b3bdebdf.js"><link rel="prefetch" href="/assets/js/24.6ff0121d.js"><link rel="prefetch" href="/assets/js/25.3c03858c.js"><link rel="prefetch" href="/assets/js/26.e5fc6cec.js"><link rel="prefetch" href="/assets/js/27.24712d33.js"><link rel="prefetch" href="/assets/js/28.5a0fcb09.js"><link rel="prefetch" href="/assets/js/29.3a720777.js"><link rel="prefetch" href="/assets/js/30.e19bdc78.js"><link rel="prefetch" href="/assets/js/31.1cc8c22e.js"><link rel="prefetch" href="/assets/js/32.1d2e9853.js"><link rel="prefetch" href="/assets/js/33.d11a42de.js"><link rel="prefetch" href="/assets/js/34.e86c0aa6.js"><link rel="prefetch" href="/assets/js/35.3430e980.js"><link rel="prefetch" href="/assets/js/36.9f1b70be.js"><link rel="prefetch" href="/assets/js/37.1a9dcc9c.js"><link rel="prefetch" href="/assets/js/38.5eabab35.js"><link rel="prefetch" href="/assets/js/39.83bb72ad.js"><link rel="prefetch" href="/assets/js/4.d115bc50.js"><link rel="prefetch" href="/assets/js/40.f46f23cf.js"><link rel="prefetch" href="/assets/js/41.60de7a41.js"><link rel="prefetch" href="/assets/js/42.e4e4d1bf.js"><link rel="prefetch" href="/assets/js/43.ed3c1cf4.js"><link rel="prefetch" href="/assets/js/44.20b57ab1.js"><link rel="prefetch" href="/assets/js/45.ed26a145.js"><link rel="prefetch" href="/assets/js/46.634588b9.js"><link rel="prefetch" href="/assets/js/47.fdc50eee.js"><link rel="prefetch" href="/assets/js/48.f89afcd1.js"><link rel="prefetch" href="/assets/js/49.c0204b62.js"><link rel="prefetch" href="/assets/js/5.88ce1e37.js"><link rel="prefetch" href="/assets/js/50.ae284579.js"><link rel="prefetch" href="/assets/js/51.2fdbdf9d.js"><link rel="prefetch" href="/assets/js/52.d36d5c5e.js"><link rel="prefetch" href="/assets/js/53.d98e7a63.js"><link rel="prefetch" href="/assets/js/54.73b5c73c.js"><link rel="prefetch" href="/assets/js/55.e8abe9d4.js"><link rel="prefetch" href="/assets/js/56.2768f22c.js"><link rel="prefetch" href="/assets/js/57.002497ca.js"><link rel="prefetch" href="/assets/js/58.0c017ac0.js"><link rel="prefetch" href="/assets/js/59.2ff329f5.js"><link rel="prefetch" href="/assets/js/6.91d13e3c.js"><link rel="prefetch" href="/assets/js/60.bde82546.js"><link rel="prefetch" href="/assets/js/61.3615e1ff.js"><link rel="prefetch" href="/assets/js/62.5f48b727.js"><link rel="prefetch" href="/assets/js/63.33217f10.js"><link rel="prefetch" href="/assets/js/64.346412be.js"><link rel="prefetch" href="/assets/js/65.05f0c998.js"><link rel="prefetch" href="/assets/js/66.e712aa92.js"><link rel="prefetch" href="/assets/js/67.30c989e9.js"><link rel="prefetch" href="/assets/js/68.061fe8a0.js"><link rel="prefetch" href="/assets/js/69.2006b639.js"><link rel="prefetch" href="/assets/js/7.ad1dbe16.js"><link rel="prefetch" href="/assets/js/70.83db880e.js"><link rel="prefetch" href="/assets/js/71.5e62c712.js"><link rel="prefetch" href="/assets/js/72.2c59de74.js"><link rel="prefetch" href="/assets/js/73.45b23a8e.js"><link rel="prefetch" href="/assets/js/74.1f7856c7.js"><link rel="prefetch" href="/assets/js/75.38e4685d.js"><link rel="prefetch" href="/assets/js/76.3311cf4d.js"><link rel="prefetch" href="/assets/js/77.692230d3.js"><link rel="prefetch" href="/assets/js/78.2663b270.js"><link rel="prefetch" href="/assets/js/79.3a770363.js"><link rel="prefetch" href="/assets/js/8.91b2cfec.js"><link rel="prefetch" href="/assets/js/80.c159e7b7.js"><link rel="prefetch" href="/assets/js/81.b746fc0a.js"><link rel="prefetch" href="/assets/js/82.d604dbfa.js"><link rel="prefetch" href="/assets/js/83.21144800.js"><link rel="prefetch" href="/assets/js/84.3710a8ee.js"><link rel="prefetch" href="/assets/js/85.4e7f176e.js"><link rel="prefetch" href="/assets/js/86.d7dcd76e.js"><link rel="prefetch" href="/assets/js/87.ff03bf7e.js"><link rel="prefetch" href="/assets/js/88.7baf9d55.js"><link rel="prefetch" href="/assets/js/89.be844457.js"><link rel="prefetch" href="/assets/js/9.25eca388.js"><link rel="prefetch" href="/assets/js/90.f15e88ea.js"><link rel="prefetch" href="/assets/js/91.e21ccdb0.js"><link rel="prefetch" href="/assets/js/92.184d1723.js"><link rel="prefetch" href="/assets/js/93.1a418e8f.js"><link rel="prefetch" href="/assets/js/94.c69dcc82.js"><link rel="prefetch" href="/assets/js/95.309ea9b0.js"><link rel="prefetch" href="/assets/js/96.522bb708.js"><link rel="prefetch" href="/assets/js/97.1d16acb1.js"><link rel="prefetch" href="/assets/js/98.77627e1c.js"><link rel="prefetch" href="/assets/js/99.2f43b47e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.33fb72bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-2d5f533b><div data-v-2d5f533b><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-2d5f533b data-v-2d5f533b><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-2d5f533b data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>时光海小屋</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Shiguanghai</span>
            
          <span data-v-64685f0e>2019 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-2d5f533b><header class="navbar" data-v-2d5f533b><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://public.shiguanghai.top/public/logo.png" alt="时光海小屋" class="logo"> <span class="site-name">时光海小屋</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/大前端/" class="nav-link"><i class="iconfont undefined"></i>
  大前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/学习笔记/" class="nav-link"><i class="iconfont undefined"></i>
  学习笔记
</a></li><li class="dropdown-item"><!----> <a href="/categories/拉勾作业/" class="nav-link"><i class="iconfont undefined"></i>
  拉勾作业
</a></li><li class="dropdown-item"><!----> <a href="/categories/面试题/" class="nav-link"><i class="iconfont undefined"></i>
  面试题
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时轴
</a></div><div class="nav-item"><a href="/blogs/other/messageBoard.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  留言板
</a></div><div class="nav-item"><a href="/blogs/other/coreplayer.html" class="nav-link"><i class="iconfont reco-api"></i>
  插件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://wallhaven.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  壁纸网站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.gnoosic.com/faves.php" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  AI音乐推荐
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.alltoall.net/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  格式转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.deepl.com/translator" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Deepl翻译器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.lalal.ai/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  伴奏提取
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jsbench.me/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  JS代码测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.jiumodiary.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  电子书搜索
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.processon.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线作图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      链接
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/shiguanghai" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/8049046" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  Bilibili
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://eduboss.shiguanghai.top" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  EduBossFed
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://rw.shiguanghai.top" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  RealWorld
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-2d5f533b></div> <aside class="sidebar" data-v-2d5f533b><div class="personal-info-wrapper" data-v-ca798c94 data-v-2d5f533b><img src="https://public.shiguanghai.top/public/avatar.png" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    Shiguanghai
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>88</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>35</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/大前端/" class="nav-link"><i class="iconfont undefined"></i>
  大前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/学习笔记/" class="nav-link"><i class="iconfont undefined"></i>
  学习笔记
</a></li><li class="dropdown-item"><!----> <a href="/categories/拉勾作业/" class="nav-link"><i class="iconfont undefined"></i>
  拉勾作业
</a></li><li class="dropdown-item"><!----> <a href="/categories/面试题/" class="nav-link"><i class="iconfont undefined"></i>
  面试题
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时轴
</a></div><div class="nav-item"><a href="/blogs/other/messageBoard.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  留言板
</a></div><div class="nav-item"><a href="/blogs/other/coreplayer.html" class="nav-link"><i class="iconfont reco-api"></i>
  插件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://wallhaven.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  壁纸网站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.gnoosic.com/faves.php" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  AI音乐推荐
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.alltoall.net/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  格式转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.deepl.com/translator" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Deepl翻译器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.lalal.ai/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  伴奏提取
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jsbench.me/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  JS代码测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.jiumodiary.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  电子书搜索
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.processon.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线作图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      链接
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/shiguanghai" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/8049046" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  Bilibili
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://eduboss.shiguanghai.top" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  EduBossFed
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://rw.shiguanghai.top" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  RealWorld
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>TypeScropt 语言</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Shiguanghai</span>
            
          <span data-v-64685f0e>2019 - </span>
          2021
        </a></span></div></div> <div data-v-2d5f533b><main class="page"><div class="page-title" style="display:none;"><h1 class="title">TypeScropt 语言</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>Shiguanghai</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2020-10-08 22:41:41</span></i> <!----> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>JavaScript</span><span class="tag-item" data-v-3b7f5bdf>Part1·JavaScript 深度剖析</span><span class="tag-item" data-v-3b7f5bdf>TypeScript</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="_4-1-类型系统"><a href="#_4-1-类型系统" class="header-anchor">#</a> 4.1 类型系统</h2> <h3 id="强类型与弱类型"><a href="#强类型与弱类型" class="header-anchor">#</a> 强类型与弱类型</h3> <ul><li>类型安全角度</li></ul> <p><strong>强类型</strong>：语言层面限制函数的实参类型必须与形参类型相同。</p> <p><strong>弱类型</strong>：语言层面不会限制实参的类型。</p> <p>这种强弱类型之分根本不是某一个权威机构的定义，但是公认的理解为：<strong>强类型有更强的类型约束，而弱类型中几乎没有什么约束</strong>。</p> <ul><li>强类型语言中不允许任意的隐式类型转换，而弱类型语言则允许任意的数据隐式类型转换。</li></ul> <p>我们这里所说的<strong>强类型是从语言的语法层面就限制了不允许传入不同类型的值</strong>。如果传入的是不同类型的值，在编译阶段就会报出错误，而不是等到运行阶段再通过逻辑判断去限制。<strong>在JavaScript当中所有报出的类型错误都是在代码层面运行时通过逻辑判断手动抛出的</strong>。</p> <p>而在JS代码当中，变量类型允许随意改变的特点，不是强弱类型的差异。就拿Python来说，它是一门强类型语言，但它的变量仍然是可以随时改变类型的。</p> <h3 id="静态类型与动态类型"><a href="#静态类型与动态类型" class="header-anchor">#</a> 静态类型与动态类型</h3> <ul><li>类型检查角度</li></ul> <p><strong>静态类型</strong>：一个变量声明时它的类型就是明确的，声明过后，它的类型就不允许再修改。
<strong>动态类型</strong>：运行阶段才能够明确变量类型，而且变量的类型随时可以改变。</p> <ul><li>动态类型语言中的变量没有类型，而变量中存放的值是有类型的。</li></ul> <p><img src="https://img-blog.csdnimg.cn/20201007214405501.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1MTQ5MjU2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <h3 id="javascript类型系统特征"><a href="#javascript类型系统特征" class="header-anchor">#</a> JavaScript类型系统特征</h3> <ul><li>弱类型 且 动态类型</li> <li>灵活且多变</li> <li>丢失了类型系统的可靠性</li> <li>没有编译环节</li></ul> <p><strong>大规模应用下，JavaScript早期的优势就变成了短板</strong>.</p> <h3 id="弱类型的问题"><a href="#弱类型的问题" class="header-anchor">#</a> 弱类型的问题</h3> <p>1.) 程序中的类型异常需要等到运行时才能发现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 异常需要等到运行时才能发现</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// obj.foo()</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>2.) 类型不明确，就会造成函数功能有可能发生改变</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 2. 函数功能可能发生改变</span>

<span class="token keyword">function</span> <span class="token function">sum</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'100'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>3.) 出现对对象索引器的错误用法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 3. 对象索引器的错误用法</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

obj<span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// 属性名会自动转换为字符串</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">'true'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>综上，弱类型语言的弊端是十分明显的，只是在代码量小的情况下这些问题都可以通过约定的方式去规避，而对于一些开发周期特别长的大规模项目，这种‘君子约定’的方式仍然存在一定隐患，只有在语法层面的强制要求下才能提供更可靠的保证。</p> <h3 id="强类型的优势"><a href="#强类型的优势" class="header-anchor">#</a> 强类型的优势</h3> <p>1.) 错误更早暴露</p> <p>2.) 代码更智能，编码更准确</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 2. 强类型代码更智能，编码更准确</span>

<span class="token keyword">function</span> <span class="token function">render</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//编译器无提示</span>
  element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'container'</span>
  element<span class="token punctuation">.</span>innerHtml <span class="token operator">=</span> <span class="token string">'hello world'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>3.) 重构更牢靠</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 3. 重构更可靠</span>

<span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">aaa</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 不敢轻易修改属性名</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'util func'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>4.) 减少不要的类型判断</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 4. 减少了代码层面的不必要的类型判断</span>

<span class="token keyword">function</span> <span class="token function">sum</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">!==</span> <span class="token string">'number'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> b <span class="token operator">!==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'arguments must be a number'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_4-2-静态类型检查器-flow"><a href="#_4-2-静态类型检查器-flow" class="header-anchor">#</a> 4.2 静态类型检查器 Flow</h2> <h3 id="flow概述"><a href="#flow概述" class="header-anchor">#</a> Flow概述</h3> <ul><li>可以弥补JavaScript弱类型所带来的弊端，为JavaScript提供了更完善的类型系统</li></ul> <p>让我们在代码中通过添加类型注解的方式去标记代码中的变量以及参数的类型，根据这些类型注解检查代码中是否存在类型使用异常，从而实现开发阶段对类型异常的检查，避免了直到运行阶段才发现类型使用的错误。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> number<span class="token punctuation">,</span> b<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 类型注解</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>对于代码中额外的类型注解，可以在运行之前通过Babel或者Flow官方提供的模块自动去除。</p> <h3 id="flow快速上手"><a href="#flow快速上手" class="header-anchor">#</a> Flow快速上手</h3> <ul><li>值得注意的是：Flow的安装路径不允许出现中文，否则会报错。</li></ul> <p>1.) 初始化package.json管理项目依赖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> init --yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.) 通过yarn安装Flow</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> flow-bin --dev  // 作为项目的开发依赖安装
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3.) 使用flow之前通过注释的方式在项目代码开始的位置添加</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>// @flow
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>4.) 关闭编译器自带的语法校验</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>拿VSCode举例，打开配置选项，搜索 javascript validate 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>5.) 使用yarn flow init 初始化 .flowconfig 配置文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> flow init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>6.) 使用yarn flow可自动找到node_modules下的.bin中找到flow命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> flow
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>7.) 完成过后可以通过yarn flow stop 命令结束服务</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> flow stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="flow编译移除注释"><a href="#flow编译移除注释" class="header-anchor">#</a> Flow编译移除注释</h3> <p>类型注解并不是JavaScript的标准语法，当我们添加类型注解过后，代码是无法正常运行的。我们可以使用工具在完成编码过后自动移除掉我们所添加的类型注解。</p> <p>1.使用官方提供的flow-remove-types移除</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token number">1</span>）yarn <span class="token function">add</span> flow-remove-types --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">yarn</span> flow-remove-types <span class="token punctuation">[</span><span class="token punctuation">]</span> -d <span class="token punctuation">[</span><span class="token punctuation">]</span> //第一个参数为源代码所在目录 第二个参数为输出目录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.使用Babel配合插件移除</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">yarn</span> <span class="token function">add</span> @babel/core @babel/cli @babel/preset-flow --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token number">2</span><span class="token punctuation">)</span> 手动在项目中添加babel配置文件 .babelrc 并在其中输入
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-flow&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token number">3</span><span class="token punctuation">)</span> <span class="token function">yarn</span> babel <span class="token punctuation">[</span><span class="token punctuation">]</span> -d <span class="token punctuation">[</span><span class="token punctuation">]</span> //第一个参数为源代码所在目录 第二个参数为输出目录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="flow开发工具插件"><a href="#flow开发工具插件" class="header-anchor">#</a> Flow开发工具插件</h3> <p>目前这种方式下，Flow检测到的代码中的问题都是输出到控制台当中的，这种体验并不直观，更好的方式是在开发工具中直接显示出类型问题。</p> <p>打开VSCode的插件面板搜索flow，安装一个叫做<strong>Flow Language Support</strong> 的插件，这是Flow官方所提供的。</p> <p>安装过后，VSCode的状态栏就会显示Flow的工作状态，而且代码中的异常也可以直接标记为红色波浪线，默认情况下只有在修改完代码过后保存才会生效，对于其他编辑器：<a href="https://flow.org/en/docs/editors/" target="_blank" rel="noopener noreferrer">Flow官网给出的对所有编辑器插件的支持<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="flow类型推断"><a href="#flow类型推断" class="header-anchor">#</a> Flow类型推断</h3> <p>根据代码使用情况，Flow可自动推断出变量的类型。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 类型推断
 *
 * @flow
 */</span>

<span class="token keyword">function</span> <span class="token function">square</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> n <span class="token operator">*</span> n
<span class="token punctuation">}</span>

<span class="token comment">// square('100')</span>

<span class="token function">square</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="flow类型注解"><a href="#flow类型注解" class="header-anchor">#</a> Flow类型注解</h3> <ul><li>添加类型注解可以更明确地限制类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 类型注解
 *
 * @flow
 */</span>

<span class="token keyword">function</span> <span class="token function">square</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 标记函数参数</span>
  <span class="token keyword">return</span> n <span class="token operator">*</span> n
<span class="token punctuation">}</span>

<span class="token keyword">let</span> num<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// 标记变量</span>

<span class="token comment">// num = 'string' // error</span>

<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span> <span class="token comment">// 标记函数返回值</span>
  <span class="token keyword">return</span> <span class="token number">100</span> <span class="token comment">// ok</span>
  <span class="token comment">// return 'string' // error</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span> <span class="token comment">// 无返回值标记为void</span>
  <span class="token comment">// return undefined</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>Flow原始类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 原始类型
 *
 * @flow
 */</span>

<span class="token keyword">const</span> a<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">'foobar'</span>

<span class="token keyword">const</span> b<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">Infinity</span> <span class="token comment">// NaN // 100</span>

<span class="token keyword">const</span> c<span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> d<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>

<span class="token keyword">const</span> e<span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">undefined</span>

<span class="token keyword">const</span> f<span class="token operator">:</span> symbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>Flow数组类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 数组类型
 *
 * @flow
 */</span>

<span class="token keyword">const</span> arr1<span class="token operator">:</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> arr2<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment">// 元组</span>
<span class="token keyword">const</span> foo<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> number<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>Flow对象类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 对象类型
 *
 * @flow
 */</span>

<span class="token keyword">const</span> obj1<span class="token operator">:</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> string<span class="token punctuation">,</span> bar<span class="token operator">:</span> number <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> obj2<span class="token operator">:</span> <span class="token punctuation">{</span> foo<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">,</span> bar<span class="token operator">:</span> number <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> bar<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> obj3<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span><span class="token operator">:</span> string <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

obj3<span class="token punctuation">.</span>key1 <span class="token operator">=</span> <span class="token string">'value1'</span>
obj3<span class="token punctuation">.</span>key2 <span class="token operator">=</span> <span class="token string">'value2'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>Flow函数类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 函数类型
 *
 * @flow
 */</span>

<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">string<span class="token punctuation">,</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// str =&gt; string</span>
  <span class="token comment">// n =&gt; number</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>Flow特殊类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 特殊类型
 *
 * @flow
 */</span>

<span class="token comment">// 字面量类型</span>

<span class="token keyword">const</span> a<span class="token operator">:</span> <span class="token string">'foo'</span> <span class="token operator">=</span> <span class="token string">'foo'</span>

<span class="token keyword">const</span> type<span class="token operator">:</span> <span class="token string">'success'</span> <span class="token operator">|</span> <span class="token string">'warning'</span> <span class="token operator">|</span> <span class="token string">'danger'</span> <span class="token operator">=</span> <span class="token string">'success'</span>

<span class="token comment">// ------------------------</span>

<span class="token comment">// 声明类型</span>

type StringOrNumber <span class="token operator">=</span> string <span class="token operator">|</span> number

<span class="token keyword">const</span> b<span class="token operator">:</span> StringOrNumber <span class="token operator">=</span> <span class="token string">'string'</span> <span class="token comment">// 100</span>

<span class="token comment">// ------------------------</span>

<span class="token comment">// Maybe 类型</span>

<span class="token keyword">const</span> gender<span class="token operator">:</span> <span class="token operator">?</span>number <span class="token operator">=</span> <span class="token keyword">undefined</span>
<span class="token comment">// 相当于</span>
<span class="token comment">// const gender: number | null | void = undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li>Flow Mixed与Any</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Mixed Any
 *
 * @flow
 */</span>

<span class="token comment">// string | number | boolean | ....</span>
<span class="token keyword">function</span> <span class="token function">passMixed</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> mixed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 强类型</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 明确类型</span>
    value <span class="token operator">*</span> value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">passMixed</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>

<span class="token function">passMixed</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token comment">// ---------------------------------</span>

<span class="token keyword">function</span> <span class="token function">passAny</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 弱类型</span>
  value<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

  value <span class="token operator">*</span> value
<span class="token punctuation">}</span>

<span class="token function">passAny</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>

<span class="token function">passAny</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="flow运行环境api"><a href="#flow运行环境api" class="header-anchor">#</a> Flow运行环境API</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 运行环境 API
 *
 * @flow
 */</span>

<span class="token comment">// 浏览器所内置的一些API所对应的一些类型限制</span>
<span class="token keyword">const</span> element<span class="token operator">:</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_4-3-typescript-javascript的超集"><a href="#_4-3-typescript-javascript的超集" class="header-anchor">#</a> 4.3 TypeScript（JavaScript的超集）</h2> <h3 id="typescript-概述"><a href="#typescript-概述" class="header-anchor">#</a> TypeScript 概述</h3> <ul><li>拥有更强大的类型系统</li> <li>支持ES6+新特性</li> <li>可编译(低至ES3，兼容性好)</li> <li>任何一种 JavaScript 运行环境都支持</li> <li>相比Flow，功能更强大，生态也更健全、更完善
<img src="https://img-blog.csdnimg.cn/20201008154915567.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1MTQ5MjU2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></li> <li>语言本身多了很多概念，学习成本增加（但TypeScript属于渐进式）</li> <li>项目初期，TypeScript会增加一些成本（针对小项目）</li></ul> <h3 id="typescript-快速上手"><a href="#typescript-快速上手" class="header-anchor">#</a> TypeScript 快速上手</h3> <p>1.） 初始化package.json管理项目依赖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> init --yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.） 通过yarn安装TypeScript</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> typescript --dev  // 作为项目的开发依赖安装
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3.） 文件默认后缀名.ts
4.） 使用yarn tsc --init 初始化 tsconfig.json 配置文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> tsc --init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>5.） 配置文件内&quot;complierOptions&quot;属性就是TypeScript编译器所对应的配置选项</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>target：设置编译后的JavaScrpit采用的ECMAScript标准
outDir：设置编译后的输出文件目录
rootDir：设置源代码文件目录位置
strict：严格模式
<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>6.） 使用yarn tsc可自动找到node_modules下的.bin中找到tsc命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> tsc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>7.） 如果需要中文错误消息提示</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> tsc --local zh-CN
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="typescript-原始类型-primitive-types"><a href="#typescript-原始类型-primitive-types" class="header-anchor">#</a> TypeScript 原始类型(Primitive Types)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">'foobar'</span>

<span class="token keyword">const</span> b<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// NaN Infinity</span>

<span class="token keyword">const</span> c<span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在非严格模式下，string, number, boolean 都可以为空。可以在配置文件修改strictNullChecks去仅对null进行限制。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> d<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">const</span> d<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">const</span> d<span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token keyword">null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> e<span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">undefined</span>

<span class="token keyword">const</span> f<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>

<span class="token keyword">const</span> g<span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="typescript-标准库声明"><a href="#typescript-标准库声明" class="header-anchor">#</a> TypeScript 标准库声明</h3> <p>Symbol 是 ES2015 标准中定义的成员，使用它的前提是必须确保有对应的 ES2015 标准库引用。也可以改变配置文件的target为es2015，但如果要求编译后为es5以下，则可以通过修改tsconfig.json中的 lib 选项，使其包含 ES2015标准库文件。但与此同时要加上dom标准库（dom和bom合并为dom标准库）以防止其他报错。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> h<span class="token operator">:</span> symbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="typescript-作用域问题"><a href="#typescript-作用域问题" class="header-anchor">#</a> TypeScript 作用域问题</h3> <ul><li>默认文件中的成员会作为全局成员</li> <li>多个文件中有相同成员就会出现冲突</li></ul> <p>解决办法1: IIFE 提供独立作用域</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>解决办法2: 在当前文件使用 export，也就是把当前文件变成一个模块，模块有单独的作用域</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="typescript-object类型-object-types"><a href="#typescript-object类型-object-types" class="header-anchor">#</a> TypeScript Object类型(Object Types)</h3> <ul><li>Object类型泛指所有的非原始类型（对象、数组、函数）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// object 类型是指除了原始类型以外的其它类型</span>
<span class="token keyword">const</span> foo<span class="token operator">:</span> <span class="token function-variable function">object</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// [] // {}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果我们需要普通的对象类型，我们需要去使用类似字面量的语法，但是更专业的方式是使用接口：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 如果需要明确限制对象类型，则应该使用这种类型对象字面量的语法，或者是「接口」</span>
<span class="token keyword">const</span> obj<span class="token operator">:</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> number<span class="token punctuation">,</span> bar<span class="token operator">:</span> string <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span>

<span class="token comment">// 接口的概念后续介绍</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="typescript-数组类型-array-types"><a href="#typescript-数组类型-array-types" class="header-anchor">#</a> TypeScript 数组类型(Array Types)</h3> <ul><li>使用Array泛型</li></ul> <p>数组类型的两种表示方式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr1<span class="token operator">:</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// 纯数字组成的数组</span>

<span class="token keyword">const</span> arr2<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 如果是 JS，需要判断是不是每个成员都是数字 -&gt;typeof</span>
<span class="token comment">// 使用 TS，类型有保障，不用添加类型判断 -&gt;类型注解</span>
<span class="token keyword">function</span> <span class="token function">sum</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// reduce计算所有成员的总和 参数1：上次计算的结果 参数2：本次循环的当前值</span>
  <span class="token keyword">return</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prev <span class="token operator">+</span> current<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="typescript-元组类型-tuple-types"><a href="#typescript-元组类型-tuple-types" class="header-anchor">#</a> TypeScript 元组类型(Tuple Types)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> tuple<span class="token operator">:</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> string<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'zce'</span><span class="token punctuation">]</span> <span class="token comment">// 元组类型 只能存对应属性</span>

<span class="token comment">// const age = tuple[0]</span>
<span class="token comment">// const name = tuple[1]</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> name<span class="token punctuation">]</span> <span class="token operator">=</span> tuple <span class="token comment">// 使用ES2015解构提取</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> entries<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> number<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// ES2017获取对象中所有的键值数组</span>
  foo<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> <span class="token number">456</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token operator">=</span> entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token comment">// key =&gt; foo, value =&gt; 123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="typescript-枚举类型-enum-types"><a href="#typescript-枚举类型-enum-types" class="header-anchor">#</a> TypeScript 枚举类型(Enum Types)</h3> <ul><li>枚举类型可以给一组数值取更好理解的名字</li> <li>一个枚举中只会存在几个固定的值，不会出现超出范围的可能性</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'Hello TypeScript'</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token string">'TypeScript is a typed superset of JavaScript.'</span><span class="token punctuation">,</span>
  status<span class="token operator">:</span> <span class="token number">3</span><span class="token comment">// 3 // 1 // 0</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>JavaScript中并没有枚举这种数据结构，大部分场景我们可以使用对象去模拟</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 用对象模拟枚举</span>
<span class="token keyword">const</span> PostStatus <span class="token operator">=</span> <span class="token punctuation">{</span>
  Draft<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  Unpublished<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  Published<span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'Hello TypeScript'</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token string">'TypeScript is a typed superset of JavaScript.'</span><span class="token punctuation">,</span>
  status<span class="token operator">:</span> PostStatus<span class="token punctuation">.</span>Draft <span class="token comment">// 3 // 1 // 0</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在TypeScript有专门的enum枚举类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 标准的数字枚举</span>
<span class="token keyword">enum</span> PostStatus <span class="token punctuation">{</span>
  Draft <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 使用等号</span>
  Unpublished <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  Published <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用方式与对象相同PostStatus.Draft。如果不指定等号后面的值，默认枚举中的值从0累加。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 字符串枚举</span>
<span class="token keyword">enum</span> PostStatus <span class="token punctuation">{</span> <span class="token comment">// 无法自增长 必须给定值</span>
  Draft <span class="token operator">=</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span>
  Unpublished <span class="token operator">=</span> <span class="token string">'bbb'</span><span class="token punctuation">,</span>
  Published <span class="token operator">=</span> <span class="token string">'ccc'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>枚举类型会入侵到运行时的代码（会影响编译后的结果）</li></ul> <p>枚举类型最终会编译为一个双向的键值对对象（可以通过键获取值，并通过值获取键）。好处是可以动态的根据枚举值获取枚举名称。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> PostStatus<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">PostStatus</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    PostStatus<span class="token punctuation">[</span>PostStatus<span class="token punctuation">[</span><span class="token string">&quot;Draft&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Draft&quot;</span><span class="token punctuation">;</span>
    PostStatus<span class="token punctuation">[</span>PostStatus<span class="token punctuation">[</span><span class="token string">&quot;Unpublished&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Unpublished&quot;</span><span class="token punctuation">;</span>
    PostStatus<span class="token punctuation">[</span>PostStatus<span class="token punctuation">[</span><span class="token string">&quot;Published&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Published&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>PostStatus <span class="token operator">||</span> <span class="token punctuation">(</span>PostStatus <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>PostStatus<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> // <span class="token operator">=</span><span class="token operator">&gt;</span> Draft
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果代码中不会使用索引器的方式去访问枚举，则建议使用常量枚举</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 常量枚举，不会侵入编译结果</span>
<span class="token keyword">const</span> <span class="token keyword">enum</span> PostStatus <span class="token punctuation">{</span>
  Draft<span class="token punctuation">,</span>
  Unpublished<span class="token punctuation">,</span>
  Published
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">&quot;__esModule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> post <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'Hello TypeScript'</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token string">'TypeScript is a typed superset of JavaScript.'</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">/* Draft */</span> <span class="token comment">// 3 // 1 // 0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="typescript-函数类型-function-types"><a href="#typescript-函数类型-function-types" class="header-anchor">#</a> TypeScript 函数类型(Function Types)</h3> <ul><li>函数声明
<ul><li>对输入输出进行约束</li> <li>参数个数需要完全相同（形参与实参保证完全一致）</li> <li>如果需要参数可选，可以在参数名称后添加'?'或者使用ES6参数默认值的特性（值得注意的是，可选参数或者默认值参数要出现在参数列表最后）</li> <li>接收任意个数参数可以使用ES6的...rest操作符</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">func1</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> number<span class="token punctuation">,</span> b<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'func1'</span>
<span class="token punctuation">}</span>

<span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

<span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>函数表达式
<ul><li>接收函数的变量也有类型</li> <li>TypeScript可以根据函数表达式推断出变量的类型</li> <li>如果把函数作为参数传递（回调函数），必须要约束形参的类型。可以使用类似箭头函数的方式表示参数可接受什么样的函数</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">func2</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> number<span class="token punctuation">,</span> b<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">string</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> number<span class="token punctuation">,</span> b<span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'func2'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="typescript-任意类型-any-types"><a href="#typescript-任意类型-any-types" class="header-anchor">#</a> TypeScript 任意类型(Any Types)</h3> <ul><li>any是动态类型，可以接收任意参数</li> <li>TypeScript不会对any类型做类型检查，any 类型是不安全的</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">stringify</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// any 动态类型</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// 接收任意类型参数 </span>
<span class="token punctuation">}</span>

<span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>

<span class="token function">stringify</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> foo<span class="token operator">:</span> any <span class="token operator">=</span> <span class="token string">'string'</span>

foo <span class="token operator">=</span> <span class="token number">100</span>

<span class="token comment">// 由于可以存放任意类型的值，所以TypeScript不会对any类型做类型检查</span>
foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//语法上不会报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="typescript-隐式类型推断-type-inference"><a href="#typescript-隐式类型推断-type-inference" class="header-anchor">#</a> TypeScript 隐式类型推断(Type Inference)</h3> <p>在TypeScript当中，如果没有通过类型注解去标记一个变量的类型，TypeScript会根据变量的使用情况去推断这个变量的类型，这种特性叫做隐式类型推断。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span> <span class="token comment">// age 被推断为 number</span>

age <span class="token operator">=</span> <span class="token string">'string'</span> <span class="token comment">// age类型错误</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果TypeScript无法推断一个变量具体的类型，这个时候会将其类型标记为any</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> foo <span class="token comment">// any类型</span>

foo <span class="token operator">=</span> <span class="token number">100</span> 

foo <span class="token operator">=</span> <span class="token string">'string'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>虽然TypeScript支持隐式类型推断，而且这种隐式类型推断可以简化代码，但是仍然建议为每个变量添加明确的类型标注，便于后期理解代码。</p> <h3 id="typescript-类型断言-type-assertions"><a href="#typescript-类型断言-type-assertions" class="header-anchor">#</a> TypeScript 类型断言(Type assertions)</h3> <p>在一些特殊情况下，TypeScript无法推断一个变量的具体类型。而作为为开发者，我们根据代码的使用情况是可以明确知道代码的类型的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 假定这个 nums 来自一个明确的接口</span>
<span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">119</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 返回值一定是一个数字</span>

<span class="token comment">// 但是对于TypeScipt推断出来的类型为number|undefined</span>
<span class="token comment">// 此时就无法将返回值直接当作数字使用</span>
<span class="token comment">// const square = res * res</span>

<span class="token comment">// 此时我们可以断言res为number类型</span>
<span class="token comment">// 1.使用as关键词断言</span>
<span class="token keyword">const</span> num1 <span class="token operator">=</span> res <span class="token keyword">as</span> number <span class="token comment">// 推荐</span>
<span class="token comment">// 2.在变量前面使用尖括号断言</span>
<span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span>res <span class="token comment">// 问题：JSX 下不能使用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>辅助TypeScript更加明确代码当中每一个成员的类型</li> <li>类型断言并不是类型转换（类型转换是代码运行时的概念，类型断言只是编译过程的概念）</li></ul> <h3 id="typescript-接口-interfaces"><a href="#typescript-接口-interfaces" class="header-anchor">#</a> TypeScript 接口(Interfaces)</h3> <ul><li>可以理解为一种规范，或者一种契约</li> <li>一种抽象的概念，可以用来约定对象的结构</li> <li>使用一个接口，就必须要遵循这个接口全部的约定</li></ul> <p>TypeScript 接口 最直观的体现：约定对象当中应该有哪些成员，成员的类型是什么样的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Post</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> string 
  <span class="token comment">// 可以使用','分割，但更标准的语法使用';'分割，也可以省略</span>
  content<span class="token operator">:</span> string
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">printPost</span> <span class="token punctuation">(</span><span class="token parameter">post<span class="token operator">:</span> Post</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">printPost</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'Hello TypeScript'</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token string">'A javascript superset'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><p>TypeScript中的接口只是为有结构的数据做类型约束的，实际运行阶段并没有意义</p></li> <li><p>可选成员、只读成员、动态成员</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Post</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> string
  content<span class="token operator">:</span> string
  subtitle<span class="token operator">?</span><span class="token operator">:</span> string  <span class="token comment">// 可选成员 '？'</span>
  readonly summary<span class="token operator">:</span> string <span class="token comment">// 只读成员 'readonly'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Cache</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>prop<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> string <span class="token comment">// 动态成员 'prop非固定' 第一个string键的类型</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cache<span class="token operator">:</span> Cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

cache<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'value1'</span> <span class="token comment">// string类型键值</span>
cache<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">'value2'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="typescript-类-classes"><a href="#typescript-类-classes" class="header-anchor">#</a> TypeScript 类(Classes)</h3> <ul><li>描述一类具体事物的抽象特征</li> <li>类比到程序的角度：描述一类具体对象的抽象成员</li></ul> <p>ES6以前，JavaScript通过函数配合原型的模式模拟实现类，ES6开始，JavaScript中有了专门的class。在TypeScript中，除了可以使用所有ECMAScript中所有类的功能还添加了一些额外的功能和用法。</p> <ul><li>TypeScript增强了class的相关语法
<ul><li>类的属性在使用之前必须在类型当中声明（为了给属性做类型标注）</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span> <span class="token comment">// 在TypeScript中需要明确在类型中声明所拥有的一些属性</span>
  name<span class="token operator">:</span> string <span class="token comment">// = 'init name'</span>
  age<span class="token operator">:</span> number
  <span class="token comment">//在TypeScript中，类的属性必须有初始值，可以在等号后面赋值或者在构造函数中初始化</span>
 
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token operator">:</span> string<span class="token punctuation">,</span> age<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token comment">// 直接通过this访问当前类的属性会报错</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>

  <span class="token function">sayHi</span> <span class="token punctuation">(</span>msg<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span> <span class="token comment">// ES6的语法为类型声明方法</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="typescript-类的访问修饰符"><a href="#typescript-类的访问修饰符" class="header-anchor">#</a> TypeScript 类的访问修饰符</h3> <ul><li>private：私有属性（只能在类的内部访问）</li> <li>public：共有属性（默认）</li> <li>protected：受保护的属性（与private相似，不同的是protected子类也可访问）</li></ul> <h3 id="typescript-类的只读属性-readonly"><a href="#typescript-类的只读属性-readonly" class="header-anchor">#</a> TypeScript 类的只读属性(readonly)</h3> <ul><li>如果已经存在访问修饰符，只读属性跟在修饰符之后</li> <li>对于只读属性，可以选择类型声明直接通过等号初始化或者在构造函数中初始化，二者选其一</li> <li>初始化过后不允许被修改（无论内部还是外部）</li></ul> <h3 id="typescript-类与接口-interface"><a href="#typescript-类与接口-interface" class="header-anchor">#</a> TypeScript 类与接口(interface)</h3> <ul><li>不同的类与类之间可能有共同的特征，对于公共特征一般使用接口去抽象</li> <li>C## 以及 Java 建议接口的定义尽可能简单和细化</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Eat</span> <span class="token punctuation">{</span>
  <span class="token function">eat</span> <span class="token punctuation">(</span>food<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Run</span> <span class="token punctuation">{</span>
  <span class="token function">run</span> <span class="token punctuation">(</span>distance<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Eat</span><span class="token punctuation">,</span> Run <span class="token punctuation">{</span>
  <span class="token function">eat</span> <span class="token punctuation">(</span>food<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">优雅的进餐: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>food<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span> <span class="token punctuation">(</span><span class="token parameter">distance<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">直立行走: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distance<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">Eat</span><span class="token punctuation">,</span> Run <span class="token punctuation">{</span>
  <span class="token function">eat</span> <span class="token punctuation">(</span>food<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">呼噜呼噜的吃: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>food<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span> <span class="token punctuation">(</span><span class="token parameter">distance<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">爬行: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distance<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="typescript-抽象类-abstract"><a href="#typescript-抽象类-abstract" class="header-anchor">#</a> TypeScript 抽象类(abstract)</h3> <ul><li>与接口类似，可以用来去约束子类当中必须要有某一个成员</li> <li>不同的是，抽象类可以包含一些具体的实现，而接口只能是成员的抽象，不包含具体的实现</li> <li>被定义为抽象类之后就只能被继承，不能再使用new的方式去创建对应的实例对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>abstract <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">eat</span> <span class="token punctuation">(</span>food<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">呼噜呼噜的吃: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>food<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  abstract <span class="token function">run</span> <span class="token punctuation">(</span>distance<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">run</span><span class="token punctuation">(</span>distance<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'四脚爬行'</span><span class="token punctuation">,</span> distance<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
d<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">'嗯西马'</span><span class="token punctuation">)</span>
d<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="typescript-泛型-generics"><a href="#typescript-泛型-generics" class="header-anchor">#</a> TypeScript 泛型(Generics)</h3> <ul><li>指在定义函数、接口或者类时，没有去指定具体的类型，等到使用时候再去指定的特征</li></ul> <p>以函数中为例，泛型就是在声明函数时，不去制定具体类型，等到调用的时候再去传递一个具体类型，其目的是为了极大程度的复用代码。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createNumberArray</span> <span class="token punctuation">(</span><span class="token parameter">length<span class="token operator">:</span> number<span class="token punctuation">,</span> value<span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token comment">// Array默认any类型 使用泛型参数传递类型 这里的Array就是一个泛型类</span>
  <span class="token comment">// 在TypeScript内部去定义Array类型的时候并不知道我们使用其存放什么样的数据</span>
  <span class="token comment">// 使用泛型参数 在我们调用时再去传递一个具体的类型</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// ES6 fill()填充</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">createNumberArray</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token comment">// res =&gt; [100, 100, 100]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>使用泛型把类型变成参数，在我们调用的时候再去传递这个类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> createArray<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>length<span class="token operator">:</span> number<span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> Array<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> createArray<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>泛型就是把我们定义时不能确定的类型变成一个参数，让我们去使用时再去传递类型参数</li></ul> <h3 id="typescript-类型声明-type-declaration"><a href="#typescript-类型声明-type-declaration" class="header-anchor">#</a> TypeScript 类型声明(Type Declaration)</h3> <ul><li>在实际开发中需要使用到第三方npm模块，而这些模块不一定是通过TypeScript编写的，所以它提供的成员就不会有强类型体验</li></ul> <p>拿lodash举例</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//把字符串转化为驼峰格式 参数和返回值为string</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> camelCase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>当我们直接去调用函数的时候发现并没有看到任何类型提示</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">camelCase</span><span class="token punctuation">(</span><span class="token string">'hello typed'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这种情况下需要单独的类型声明</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>declare <span class="token keyword">function</span> <span class="token function">camelCase</span> <span class="token punctuation">(</span><span class="token parameter">input<span class="token operator">:</span> string</span><span class="token punctuation">)</span><span class="token operator">:</span> string
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>有了这样一个声明过后再去使用这个函数时就会有对应的类型限制</p> <ul><li>目前绝大多数哦npm模块都已经提供了对应的声明，只需要安装对应的声明模块即可</li></ul> <p>拿lodash举例，我们import时报错会发现，会建议我们去安装一个@type/lodash的模块，这个就是lodash对应的类型声明模块，需要注意的是：类型声明模块应该是一个开发模块，它里面不会提供任何的具体的代码，只是对一个模块做对应的类型声明。</p> <ul><li>目前越来越多的模块已经在内部集成了这种类型声明文件</li></ul></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/18/2021, 1:57:54 PM</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="player-container"><vue-core-video-player volume="0.5" preload="metadata" controls="controls"></vue-core-video-player></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到时光海小屋 
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><canvas id="vuepress-canvas-ribbon"></canvas><canvas id="vuepress-canvas-cursor"></canvas><div></div><div class="reco-bgm-panel" data-v-39f9e6e0><audio id="bgm" src="https://public.shiguanghai.top/public/源星球，远星球.m4a" data-v-39f9e6e0></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><img src="https://p2.music.126.net/8PepgHt0XXmxcZe5TcVedw==/17702137207431786.jpg?param=130y130" data-v-39f9e6e0></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><div class="reco-bgm-cover" style="background-image:url(https://p2.music.126.net/8PepgHt0XXmxcZe5TcVedw==/17702137207431786.jpg?param=130y130);" data-v-39f9e6e0><div class="mini-operation" style="display:none;" data-v-39f9e6e0><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-39f9e6e0></i></div> <div class="falut-message" style="display:none;" data-v-39f9e6e0>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><div class="info-box" data-v-39f9e6e0><i class="reco-bgm reco-bgm-music music" data-v-39f9e6e0></i>源星球，远星球</div> <div class="info-box" data-v-39f9e6e0><i class="reco-bgm reco-bgm-artist" data-v-39f9e6e0></i>别方</div> <div class="reco-bgm-progress" data-v-39f9e6e0><div class="progress-bar" data-v-39f9e6e0><div class="bar" data-v-39f9e6e0></div></div></div> <div class="reco-bgm-operation" data-v-39f9e6e0><i class="reco-bgm reco-bgm-last last" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-play play" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-next next" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-39f9e6e0></i> <div class="volume-bar" data-v-39f9e6e0><div class="bar" data-v-39f9e6e0></div></div></div></div> <div class="reco-bgm-left-box" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><i class="reco-bgm reco-bgm-left" data-v-39f9e6e0></i></div></div></div><div></div></div></div>
    <script src="/assets/js/app.9170ba12.js" defer></script><script src="/assets/js/3.654813a0.js" defer></script><script src="/assets/js/1.6c2e7c81.js" defer></script><script src="/assets/js/16.ad9b491c.js" defer></script>
  </body>
</html>
